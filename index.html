<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=0.5"/>
    <title>audio-visual learning</title>
    <link type="text/css" rel="stylesheet" href="plugin/bootstrap-5.2.0-dist/css/bootstrap.css">
    <link type="text/css" rel="stylesheet" href="plugin/jsmind/style/jsmind.css"/>
    <link rel="stylesheet" href="plugin/fontawesome-free-6.1.2-web/css/all.css">
    <style>
        header {
            background: transparent;
            box-shadow: 5px 5px 10px #cccccc47;
            -webkit-transition: background 0.5s ease-in-out, padding 0.5s ease-in-out;
            transition: background 0.5s ease-in-out, padding 0.5s ease-in-out;
        }

        header a {
            color: #000000 !important;
        }

        header.text-bg-light {
            /* header color */
            background-color: #EC7357 !important;
        }

        .dropdown .dropdown-item:active {
            background-color: #EC7357 !important;
        }

        header.text-bg-light a {
            color: white !important;
        }

        header.text-bg-light .dropdown-menu a {
            color: #000000 !important;
        }


        .carousel-inner .d-block {
            height: calc(80vh);
            object-fit: cover;
        }

        .blur {
            filter: blur(7px);
        }

        .carousel-inner .carousel-caption {
            color: #7d7d7d;
            padding-bottom: calc(35vh);
            mix-blend-mode: difference;
        }

        .carousel-inner .carousel-caption p:first-child {
            font-size: 40px;
            font-weight: 700;
            /*background-color: #565e64;*/
            /*border-radius: 50px;*/
        }

        .carousel-inner .carousel-caption p:last-child {
            font-weight: 700;
        }

        jmnodes jmnode.selected {
            box-shadow: 2px 2px 10px #c3c3c3;
        }

        jmnodes jmnode.selected:hover {
            box-shadow: 2px 2px 10px #c3c3c3;
        }

        jmnode:hover {
            box-shadow: 2px 2px 10px #c9c9c9;
        }

        jmnode a, jmnode a:hover {
            color: unset;
        }

        jmnode p {
            margin: 0;
        }

    </style>

    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?fa07ca89f6f689173a190d2a68ea6591";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<body style="width: 100%;">

<header class="p-3 sticky-top scrolling-navbar">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="https://gewu-lab.github.io/" target="_blank"
               class="d-flex align-items-center mb-2 mb-lg-0 text-decoration-none"
               style="">
                <img src="img/logo.png" alt="logo" style="width: 40px; height: 40px;border-radius: 50%">
            </a>

            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0"
                style="padding-left: 30px">
                <li><a href="index.html" class="nav-link px-2 ">Homepage</a></li>
                <li><a href="https://arxiv.org/abs/2208.09579" class="nav-link px-2 ">Full Survey</a></li>
                <li class="nav-item dropdown" style="z-index: 99999">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                       aria-expanded="false">
                        Content
                    </a>
                    <ul class="dropdown-menu" id="content-page-nav">
                        <li>
                            <a class="dropdown-item" href="sub.html?name=Audio-visual Boosting">
                                Audio-visual Boosting
                            </a>
                        </li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="sub.html?name=Cross-modal Perception">Cross-modal
                            Perception</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li>
                            <a class="dropdown-item" href="sub.html?name=Audio-visual Collaboration">
                                Audio-visual Collaboration
                            </a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="https://gewu-lab.github.io/awesome-audiovisual-learning/" class="nav-link px-2">Awesome List</a>
                </li>
                <li>
                    <a id="visits-count" style="margin-left: 10px;font-size: 12px;position: relative;bottom: -8px;"></a>
                </li>
            </ul>


        </div>
    </div>
</header>

<div id="fullpage">
    <div style="width: 100%;">
        <div id="carouselExampleDark" class="carousel carousel-dark slide carousel-fade" data-bs-ride="carousel"
             style="box-shadow: 5px 5px 10px #eee;top: -72px;">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active"
                        aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1"
                        aria-label="Slide 2"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active" data-bs-interval="10000">
                    <video id="index-video" class="d-block w-100 blur" autoplay loop muted style="filter: blur(5px)">
                        <source src="img/05551400.MP4"
                                type="video/mp4">
                    </video>
                    <div class="carousel-caption d-none d-md-block">
                        <p>Learning in Audio-visual Context:<br> A Review, Analysis, and New Perspective</p>
                        <p></p>
                    </div>
                    <span class="mute-video fa fa-volume-xmark" value="#index-video"
                          style="position: absolute;right: 25px;bottom: 20px;color: white;font-size:  30px"></span>
                </div>
                <div class="carousel-item" data-bs-interval="3000" style="background-color: white;">
                    <div class="d-block w-100" src="img/consistency.jpg" alt=""
                         style="background: url('img/consistency.jpg') no-repeat center; background-size: 70% auto">
                    </div>
                    <!--                    <div class="carousel-caption d-none d-md-block">-->
                    <!--                        <p>Learning in Audio-visual Context:<br> A Review, Analysis, and New Perspective</p>-->
                    <!--                        <p></p>-->
                    <!--                    </div>-->

                </div>
            </div>

            <!--    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">-->
            <!--        <span class="carousel-control-prev-icon" aria-hidden="true"></span>-->
            <!--        <span class="visually-hidden">Previous</span>-->
            <!--    </button>-->
            <!--    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">-->
            <!--        <span class="carousel-control-next-icon" aria-hidden="true"></span>-->
            <!--        <span class="visually-hidden">Next</span>-->
            <!--    </button>-->
        </div>
    </div>
    <div class="section" style="width: 100%;text-align: center;">
        <img src="img/cal_22_10.jpg" alt="caculate" style="margin:auto;width: 70%;margin-top: 5%">
    </div>

    <div class="section" style="width: 100%;height:calc(100vh);margin: auto;">
        <div id="jsmind_container" style="width: 100%;height:calc(100vh);margin: auto;">

        </div>
        <div style="position: relative;bottom: 30px;width:auto;padding-left:30px;font-size: 12px;color: #646464;z-index: 9999999;">
            If you have any suggestions or questions, please contact <a
                href="mailto:yakewei@ruc.edu.cn">yakewei@ruc.edu.cn</a>.
        </div>
    </div>
</div>

<script src="script/jquery-3.6.0.min.js"></script>
<script src="plugin/popper.min.js"></script>
<script src="plugin/bootstrap-5.2.0-dist/js/bootstrap.js"></script>
<script src="plugin/jsmind/js/jsmind.js"></script>
<script type="application/javascript">
    let carousel_inner_start_pos = null;
    let carousel_start_top = null;
    $(function () {
        $(document)
            .off("scroll")
            .on("scroll", function () {
                var top = $(this).scrollTop();

                //视觉差
                let $dom_carousel_inner = $(".carousel-inner .carousel-caption");
                if (carousel_inner_start_pos === null) {
                    let value = $dom_carousel_inner.css("padding-bottom");
                    carousel_inner_start_pos = Number(value.substr(0, value.length - 2));
                }
                $dom_carousel_inner.css("padding-bottom", (carousel_inner_start_pos + top).toFixed(0) + "px");

                // header变色
                if (top > 50) {
                    $("header").addClass("text-bg-light");
                } else {
                    $("header").removeClass("text-bg-light");
                }
            })
            .off("click", ".mute-video")
            .on("click", ".mute-video", function () {
                const $this = $(this);
                const $video = $($this.attr("value"));
                if ($video.prop('muted')) {
                    $video.prop('muted', false);
                    $this.removeClass("fa-volume-xmark");
                    $this.addClass("fa-volume-high")
                } else {
                    $video.prop('muted', true);
                    $this.removeClass("fa-volume-high");
                    $this.addClass("fa-volume-xmark")
                }
            })
        ;

        $.get("content/Audio-visual Learning.md", function (data) {
            let mind_data = [];
            let stack = [];
            let id_index = 0;
            let last_type = 1;
            const node_color = ['#ea4a3a', '#ec9951', '#31a4b4'];
            let color_index = -1;
            for (let line of data.split("\n")) {
                const mr = line.match(/^((-)|(###)|(##)|(#)) /);
                if (mr == null) {
                    continue
                }
                let line_type = mr.length - 1;
                while (typeof (mr[line_type]) === "undefined") {
                    line_type--;
                }
                line_type = mr.length - line_type

                const line_content = line.substr(mr[0].length);

                let o = {
                    "id": "#" + (id_index++)
                }
                if (stack.length === 0) {
                    o['isroot'] = true
                } else {
                    for (let i = line_type; i <= last_type; i++) {
                        stack.pop();
                    }
                    o['parentid'] = stack[stack.length - 1]

                    if (stack.length === 1) {
                        color_index = (color_index + 1) % node_color.length;
                    }
                    let fade_level = 5;
                    let fade_value = Math.max((255 * (fade_level - stack.length + 1) / fade_level).toFixed(0), 0);
                    let fade_value_hex = (fade_value).toString(16);
                    while (fade_value_hex.length < 2) {
                        fade_value_hex = '0' + fade_value_hex;
                    }

                    o['foreground-color'] = fade_value > 150 ? '#ffffff' : '#111111';
                    o['background-color'] = node_color[color_index] + fade_value_hex;
                }

                o["expanded"] = line_type < 3;
                if ("Audio-visual Recognition" === line_content) {
                    o["expanded"] = true;
                }


                o['line_type'] = line_type;
                o['node_level'] = color_index;
                o['item'] = line_content;


                o['topic'] = line_content;
                stack.push(o['id'])
                last_type = line_type
                mind_data.push(o)


            }
            console.log(mind_data)
            var mind = {
                "meta": {
                    "name": "Learning in Audio-visual",
                    "author": "zhangsan",
                    "version": "1"
                },
                "format": "node_array",
                "data": mind_data
            };
            var options = {
                container: 'jsmind_container',
                editable: false,
                theme: 'my',
                mode: 'full',
                view: {
                    engine: 'svg'
                }
            };
            let jm = jsMind.show(options, mind);
            jm.add_event_listener(function (type, data) {
                if (type === jsMind.event_type.select) {
                    jm.select_clear();
                    let node = jm.get_node(data['node']);
                    if (node.children.length === 0) {
                        let url = $('#content-page-nav a.dropdown-item').eq(node.data.node_level).attr('href');
                        url += "#" + node.data.item;
                        window.location.href = url;
                        return
                    }
                    if (node.expanded) {
                        jm.collapse_node(node);
                    } else {
                        jm.expand_node(node);
                    }
                }
            })
        }).fail(function (data) {
            alert("error: " + data.status)
        })

        $.get("https://api.countapi.xyz/hit/audio-visual-learning/home-page", function (data) {
            let visits = data['value'] || 0;
            $("#visits-count").text(visits+" visits")
        });
    })
</script>
</body>
</html>
